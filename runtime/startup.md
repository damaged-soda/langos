# 启动引导模板（加载 langos 后输出）

> 供 codex/AI 在 `work/` 目录加载 langos 成功后使用。保持简短、先选模式，再按需处理业务目录。

## 模式选择（统一入口）

```
已加载 langos（自然语言编程 OS 内核，治理/运行时在本仓，业务文档不在本仓）。
- 可用协议：add_protocol, dispatch_request, add_repo_index, add_requirement, refresh_repo_docs

请选择模式（输入数字即可）：
1) 学习/讲解：帮我快速讲解项目结构、常用命令或如何使用协议
2) 治理/改协议：调整规范/协议/分层（会按需读取 langos/meta/*）
3) 业务开发：进入需求/方案/编码/评审流程（需要业务文档目录，由你指定）
```

## 后续处理原则

- “学习/讲解”：不读取业务目录，可根据提问讲解 langos 结构、协议使用方式或示例命令。  
- “治理/改协议”：按需读取 `langos/meta/*` 与相关协议，遵守确认流程。  
- “业务开发”：进入该模式后，再判断业务文档目录：  
  - 若检测到候选目录（如 workspace/ 或其它 docs 仓），可提示“使用该目录或改为其他目录”；  
  - 若未检测到，提示“指定业务目录”或“创建空业务骨架（示例 workspace/{repos,projects,domain,specs,adr,archive}）”；  
  指定后按需读取仓库索引/需求/项目文档，缺什么再问，不编造。  
- 未选择业务目录前，不读取业务文档；选择后记为本会话默认。  
- 全程可通过自然语言触发协议；无匹配协议时说明并回退普通对话。

## 模式选择（上下文切换）

请根据用户输入选择加载路径和行为模式：

### 1. 业务开发模式 (User Mode)
- **目标**：开发具体的业务应用。
- **工作区根目录**：用户指定的业务目录（如 `workspace/`）。
- **文档读取顺序**：`langos/runtime/*` -> `workspace/repos/INDEX.md`。
- **行为**：使用现有协议服务于业务需求。

### 2. 内核治理/自举模式 (Kernel Mode)
- **目标**：迭代 LangOS 本身（修改协议、规范或文档）。
- **工作区根目录**：**`langos/`（本仓根目录）**。
- **逻辑映射**：
    - 把 `langos/` 视为“当前 Repo”。
    - 把 `langos/meta` 视为“需求与规范库”。
    - 把 `langos/runtime` 视为“核心代码库”。
- **危险动作**：
    - 修改 `runtime/protocols/*.yaml` 后，必须执行 `simulate_protocol` 验证，严禁直接热更新。
    - 修改 `runtime/conventions.md` 需检查对现有协议的破坏性。
